# SimpleRegistrationSystemPHP
Simple registration system in PHP.

## Цель работы
Спроектировать и разработать систему авторизации пользователей на протоколе HTTP.

В данном проекте реализованы следующие пункты
- Формы регистрации/входа
- Ограничение время сессии
- Хранения хэша пароля с солью, при чем при создании двух одинаковых паролей хэш будет разный
- Проверка на оригинальность пользователя(Отказ в регистрации если login или email уже занят)

## Ход работы

Реализовал интерфес с формой регистрации и входа, для хранения данных используется БД MySQL.

Хореография
![Хореография](https://github.com/DericcoM/SimpleRegistrationSystemPHP/blob/main/%D0%A5%D0%BE%D1%80%D0%B5%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F.png)

В проекте содержится 7 файлов: style.css, app.js, check.php, login.php, Diagrams.fig, exit.php, index.php, no_user.html.

- style.css таблица стилей.
- app.js Создаетдинамичность на сайте.
- check.php файл регистрации и добавления пользователя в БД.
- login.php файл авторизации пользователя.
- Diagrams.fig представление сценария работы программы в виде диаграммы figma.
- exit.php файл удаления куки и деавторизации пользователя.
- index.php файл содержащий формы регистрации и авторизации, а также кнопку выхода пользователя из системы.
- no_user.html файл ошибки авторизации, при неправильно введенном логине или пароле в процессе авторизации.

Пользователю предлагается динамический выбор между формой регистрацией и формой авторизации на странице index.php. Если пользователь не зарегистрирован то ему следует в форме регистрации ввести почта логин и пароль, которые проверяются на правильность ввода, т.е. длина логина должна быть не меньше 3 символов, длина почты не меньше 4 символов и длина пароля от 4 до 10 символов. Если какое-либо из вводимых значений не проходит проверку, то выводится соответствующая ошибка. 

После нажать кнопку кнопку "Sign up", после чего все будет внесено в базу данных MySQL. Пароль хешируется с помощью встроенной функции password_hash($pass, PASSWORD_DEFAULT), где $pass - пароль пользователя, а затем передается в базу данных. Для каждого пользователя хешированный пароль разный. 

Далее необходимо залогиниться. Если данного логина не существует(проверяется в login.php), то происходит редирект на страницу no_user.html, где выводится соответсвующая ошибка и кнопка повторного входа, которая возвращает на страницу index.php.

Если пользователь с таким именем найден, то в этом же скрипте login.php проверяется введенный пароль с помощью функции (password_verify($_POST['pass'], $row['pass'])), где $_POST['pass'] - введенный пароль пользователем в форму, а $row['pass'] - хеш пароля взятый из базы данных. Если пароли проходит верификацию то пользователь возвращается на страницу index.php но уже с cookie, где отображается имя вошедшего пользователя и кнопка выйти. срабатывает скрипт success.php и ползователь попадает на свою страницу с именем и кнопкой выйти. 

Устанавливается cookie на час, так что в течении часа даже при закрытии и открытии страницы повторно пользователь будет авторизован. Спустя час cookie пользователя удаляются.

По нажатии на кнопку выйти сработает скрипт exit.php который удалит cookie у пользователя и произойдет редирект на index.php но уже без cookie, где пользователь должен будет снова авторизоваться либо зарегистрироваться.
